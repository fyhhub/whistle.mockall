import{a as m,o as y,b as $,d as q,n as A,u as w,r as C,e as J,f as L,g as T,h as R,i as z,c as H}from"./runtime-dom.esm-bundler-4968a867.js";const F={style:{position:"relative"}},M=["contentEditable","innerHTML"],W={key:0,class:"error-popup",style:{display:"none",position:"absolute",bottom:"6px",right:"24px",color:"#d23b3b","font-size":"12px","font-weight":"600","user-select":"none"}},I={__name:"LiteJsonEditor",props:{modelValue:{type:[String,Object,null],required:!0},indent:{type:Number,default:3},dark:Boolean,formatting:Object,withoutEdit:Boolean,withoutError:Boolean},emits:["update:modelValue"],setup(u,{emit:d}){const o=u,c=m(()=>({number:"#a9dc76",braces:"#84aecc",brackets:"#d26a6a",colon:o.dark?"#ffffff":"#4f4f4f",comma:o.dark?"#ffff25":"#f8c33b",string:o.dark?"#78dce8":"#5f9fca",string_quotes:"#e393ff",key:"#ff6188",key_quotes:"#fc9867",null:"#cccccc",true:o.dark?"#c2e69f":"#8ccf79",false:"#e69fc2"})),l=m(()=>o.formatting?Object.keys(c.value).reduce((e,n)=>{var t;return{...e,[n]:(t=o.formatting[n])!=null?t:c.value[n]}},{}):c.value),k=e=>{const n=document.getSelection();if(n.rangeCount>0){const t=n.getRangeAt(0),a=t.cloneRange();a.selectNodeContents(e),a.setEnd(t.endContainer,t.endOffset);const r=a.toString(),s=r[r.length-1],i=b(r,s);return{character:s,occurrence:i,section:r}}return null},E=(e,n)=>{const t=window.getSelection(),a=document.createRange();let r=V(e),s=n.occurrence,i=0,p;for(let g=0;g<r.length&&(p=r[g],i=S(p.textContent,n.character,s),!(i>=0));g++)s-=b(p.textContent,n.character);i++,a.setStart(p,i),a.setEnd(p,i),t.removeAllRanges(),t.addRange(a)},x=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),S=(e,n,t)=>{const a=e.split(n,t).join(n).length;return a===e.length?-1:a},b=(e,n)=>n?e.replace(new RegExp(`[^${x(n)}]`,"g"),"").length:0,V=e=>{let n,t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);for(;n=a.nextNode();)t.push(n);return t},_=(e,n=0)=>{if(e===null)return`<span style="color: ${l.value.null}">null</span>`;let t="";return t+=`<span style="color: ${l.value.braces}">{</span>
`,Object.keys(e).forEach((a,r,s)=>t+=`${"&nbsp;".repeat(n+o.indent)}<span style="color: ${l.value.key}"><span style="color: ${l.value.key_quotes}">"</span>${a}<span style="color: ${l.value.key_quotes}">"</span></span><span style="color: ${l.value.colon}">:</span>${f(e[a],n+o.indent)}${r<s.length-1?`<span style="color: ${l.value.comma}">,</span>`:""}
`),t+="&nbsp;".repeat(n),t+=`<span style="color: ${l.value.braces}">}</span>`,t},N=(e,n=0)=>{let t="";return t+=`<span style="color: ${l.value.brackets}">[</span>
`,e.forEach((a,r,s)=>t+=`${"&nbsp;".repeat(n+o.indent)}<span>${f(a,n+o.indent)}</span>${r<s.length-1?`<span style="color: ${l.value.comma}">,</span>`:""}
`),t+="&nbsp;".repeat(n),t+=`<span style="color: ${l.value.brackets}">]</span>`,t},O=e=>`<span style="color: ${l.value.string}"><span style="color: ${l.value.string_quotes}">"</span>${e}<span style="color: ${l.value.string_quotes}">"</span></span>`,B=e=>`<span style="color: ${l.value[e]}">${e}</span>`,j=e=>`<span style="color: ${l.value.number}">${e}</span>`,f=(e,n=0)=>{const t=Array.isArray(e)?"array":typeof e;return v[t]?v[t](e,n):e},v={object:_,array:N,string:O,boolean:B,number:j},h=m({get:()=>o.modelValue?f(typeof o.modelValue=="string"?JSON.parse(o.modelValue):o.modelValue):"",set:async e=>{try{const n=e.innerText.split(/[\xa0\n]+/).join("");let t=n?JSON.parse(n):null,a;if(typeof o.modelValue=="string"?(t=t?JSON.stringify(t):"",a=t!==o.modelValue):a=JSON.stringify(t)!==JSON.stringify(o.modelValue),o.withoutError||(e.nextElementSibling.style.display="none"),a){const r=t&&k(e);d("update:modelValue",t),r&&(await L(),E(e,r))}}catch{o.withoutError||(e.nextElementSibling.style.display="block")}}});return(e,n)=>(y(),$("div",F,[q("div",{style:A([u.dark&&"background: #252530; color: #ffffff","height: 100%; width: 100%; padding: 4px; border-radius: inherit; font-family: monospace; overflow: auto; outline: none; white-space: pre-wrap; box-sizing: border-box"]),contentEditable:!u.withoutEdit,onKeyup:n[0]||(n[0]=t=>h.value=t.target),innerHTML:w(h)},null,44,M),C(e.$slots,"default",{},()=>[u.withoutError?J("",!0):(y(),$("div",W,"Incorrect JSON format"))])]))}},K=T({__name:"App",setup(u){const d=R();return console.log("%c Line:10 🍰 window.whistleBridge","color:#ea7e5c",window.whistleBridge),window.onload=()=>{window.whistleBridge.addNetworkListener(function(o){const{selectedList:c=[]}=o,l=c[0];console.log("%c Line:12 🥥 selected","color:#93c0a4",l)})},(o,c)=>(y(),z(w(I),{modelValue:d.value,"onUpdate:modelValue":c[0]||(c[0]=l=>d.value=l)},null,8,["modelValue"]))}});H(K).mount("#app");
